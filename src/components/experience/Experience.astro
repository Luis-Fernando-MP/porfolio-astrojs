---
import './style.scss'
import './responsiveStyle.scss'
import type workExperiences from '@data/workExperiences.json'
import Icon from '@/utils/Icon.astro'
import { Eye } from '@icons/index'
import { Image } from 'astro:assets'
import { slugify } from '@/utils/format'

interface Props {
  history: (typeof workExperiences)[0]
  index: number
}

const { history, index } = Astro.props

const { date, position, url, background, responsibilities, title } = history
---

<li class='experience-history' data-index={index + 1}>
  <span>{date}</span>
  <h3>{position}</h3>
  <aside class='experience-history__images'>
    <h4>{title}</h4>
    <div>
      <Image src='/me.webp' alt='photo luis Fernando' width='20' height='20' />
      <a href={url} target='_blank' rel='noopener noreferrer'>
        <img
          src={`./companies/${background}`}
          loading='lazy'
          decoding='async'
        />
      </a>
    </div>
  </aside>
  <p>{responsibilities[0]}</p>
  <a href={`/works/${slugify(title)}`} class='btn'>
    <p>Saber m√°s...</p>
    <Icon file={Eye} />
  </a>
</li>
